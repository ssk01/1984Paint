<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>game 1</title>
        <style media="screen">
            canvas {
                border: 1px black solid;
            }
            #canvas-container {
            display: flex;
            /* flex:10; */
            /* flex-direction: row; */
            }

            /* .sider-item {
            flex: 1;
            }

            .main-item {
            flex: 8;
            } */
        </style>
        <!-- <script src='scene/main/ball.js'></script>
        <script src='scene/main/paddle.js'></script>
        <script src='scene/main/block.js'></script> -->
        <script src='util.js'></script>
        <script src='canvasLineWidth.js'></script>
        <script src='canvasToolbar.js'></script>

        <script src='cursor.js'></script>
        <script src='rect.js'></script>
        <script src='line.js'></script>
        <script src='SKpaint.js'></script>

      
    </head>
    <body>
            <div id="canvas-container">
                <div class="sider-item">
                    <div>

                        <canvas id="canvasToolbar", width="100", height="400"></canvas>
                    </div>
                    <div>
                        <canvas id="canvasLineWide", width="100", height="300"></canvas>
                    </div>
                </div >
                <div class = 'main-item'>
                    <canvas class = 'main-item' id="canvas", width="800", height="600"></canvas>

                </div>
            </div>
        <!-- <input id="id-input-speed", type="range", value="30"> -->
        <!-- <div class="">
            <textarea id="id-text-log" rows="15" cols="45"></textarea>
        </div> -->
      

        <script>
            // var log = function(){
            // }
            var es = sel => document.querySelectorAll(sel);
            var canvas = es('#canvas')[0]
            // var canvasToolbar = es('#canvasToolbar')[0]
            var ctx = canvas.getContext('2d');
            // ctx.fillRect(0, 0, 10, 10);

            var lineWidthConfig = [1, 1, 5, 10, 20]
            // var drawRect = function(x, y, w, h, color){
            //     ctx.fillRect(x, y, w, h)
            // }
      

            var paint = new SKpaint(canvas)
            initCanvasLineWide(paint)
            initCanvasToobar(paint)
            var mousedown = false
            var line = null
            var cursor = new Cursor(0, 0, canvas)
            paint.add(cursor)
            

            canvas.addEventListener('mousedown', function(event){
                mousedown = true
                xy = getXY(event, canvas)
                x = xy[0]
                y = xy[1]
                // line = new Line(x, y, canvas)
                line = paint.newImg(x, y, canvas)
                paint.add(line)
                log('mousedown',x ,y, line)
            })
            canvas.addEventListener('mouseup', function(event){
                mousedown = false
                if (line != null){
                    line.setFinish()
                }
                line = null
                log('mouseup')
            })
            canvas.addEventListener('mousemove', function(event){
                if (mousedown){
                    xy = getXY(event, canvas)
                    x = xy[0]
                    y = xy[1]
                    line.setEend(x, y)
                    // console.log("x: " + x + " y: " + y);
                    // drawLine(x, y)
                    log(event)
                }
                log('fuckkk')
                xy = getXY(event, canvas)
                x = xy[0]
                y = xy[1]
                cursor.setXY(x, y)
            })
            // canvas.addEventListener('mouseover', function(event){
            //     xy = getXY(event)
            //     x = xy[0]
            //     y = xy[1]
            //     cursor.setXY(x, y)
            //     // line.setEend(x, y)
            //     // console.log("x: " + x + " y: " + y);
            //     // drawLine(x, y)
            //     log('mbbb', event)
            // })
            var __main = function(){
                paint.update()
                paint.draw()
                // window.setInterval(__main, 50)
                // log(213123)
            }
            window.setInterval(__main, 200)
            // cursor.setXY(100, 100)
            // cursor.draw()
            // line = new Line(20, 20)
            // line.setEend(100,100)
            // line.draw()

        </script>   

<script>


</script>   

    </body>
</html>